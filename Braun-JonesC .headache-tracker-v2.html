<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Daily Headache Tracker - Version 2</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            background: white;
            border-radius: 20px;
            box-shadow: 0 10px 40px rgba(0, 0, 0, 0.2);
            max-width: 800px;
            width: 100%;
            margin: 0 auto;
            padding: 40px;
        }

        .header {
            text-align: center;
            margin-bottom: 30px;
        }

        .header h1 {
            color: #667eea;
            font-size: 2.5em;
            margin-bottom: 5px;
        }

        .version-badge {
            display: inline-block;
            background: #764ba2;
            color: white;
            padding: 5px 15px;
            border-radius: 20px;
            font-size: 0.9em;
            font-weight: 600;
        }

        .date-display {
            background: #f0f0f0;
            padding: 15px;
            border-radius: 10px;
            text-align: center;
            font-size: 1.3em;
            color: #555;
            margin-bottom: 30px;
            font-weight: 600;
        }

        .section {
            margin-bottom: 30px;
            padding: 20px;
            background: #f9f9f9;
            border-radius: 15px;
            border-left: 5px solid #667eea;
        }

        .section-title {
            font-size: 1.4em;
            color: #667eea;
            margin-bottom: 15px;
            font-weight: 700;
        }

        .question {
            margin-bottom: 25px;
        }

        .question-text {
            font-size: 1.2em;
            color: #333;
            margin-bottom: 12px;
            font-weight: 600;
        }

        .button-group {
            display: flex;
            gap: 15px;
            flex-wrap: wrap;
        }

        .big-button {
            flex: 1;
            min-width: 120px;
            padding: 20px;
            font-size: 1.3em;
            font-weight: 700;
            border: none;
            border-radius: 12px;
            cursor: pointer;
            transition: transform 0.2s, box-shadow 0.2s;
            color: white;
        }

        .big-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 15px rgba(0, 0, 0, 0.2);
        }

        .big-button.selected {
            box-shadow: 0 0 0 5px rgba(255, 255, 255, 0.9), 0 0 20px rgba(0, 0, 0, 0.3);
            transform: scale(1.1);
            font-weight: 900;
            border: 3px solid white;
        }

        .yes-button {
            background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
        }

        .no-button {
            background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);
        }

        .option-button {
            padding: 15px 20px;
            font-size: 1.1em;
            border: 2px solid #ddd;
            background: white;
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.2s;
            color: #333;
        }

        .option-button:hover {
            border-color: #667eea;
            background: #f0f0ff;
        }

        .option-button.selected {
            border-color: #667eea;
            background: #667eea;
            color: white;
            font-weight: 700;
            transform: scale(1.05);
            box-shadow: 0 4px 12px rgba(102, 126, 234, 0.4);
        }

        select {
            width: 100%;
            padding: 15px;
            font-size: 1.1em;
            border: 2px solid #ddd;
            border-radius: 10px;
            cursor: pointer;
        }

        .emoji-scale {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(90px, 1fr));
            gap: 10px;
            margin-bottom: 15px;
        }

        .emoji-option {
            padding: 15px;
            text-align: center;
            border: 3px solid #ddd;
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.2s;
        }

        .emoji-option:hover {
            border-color: #667eea;
            transform: scale(1.05);
        }

        .emoji-option.selected {
            border-color: #667eea;
            background: #f0f0ff;
        }

        .emoji-option .emoji {
            font-size: 2em;
            display: block;
            margin-bottom: 5px;
        }

        .emoji-option .label {
            font-size: 0.9em;
            color: #666;
            font-weight: 600;
        }

        .checkbox-group {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
            gap: 10px;
        }

        .checkbox-item {
            display: flex;
            align-items: center;
            gap: 10px;
            padding: 12px;
            background: white;
            border-radius: 8px;
            cursor: pointer;
            border: 2px solid #ddd;
            transition: all 0.2s;
        }

        .checkbox-item:hover {
            border-color: #667eea;
            background: #f0f0ff;
        }

        .checkbox-item input[type="checkbox"] {
            width: 20px;
            height: 20px;
            cursor: pointer;
        }

        .checkbox-item label {
            cursor: pointer;
            font-size: 1em;
            color: #333;
        }

        .water-cups {
            display: flex;
            gap: 10px;
            justify-content: center;
            margin-top: 10px;
        }

        .water-option {
            padding: 15px 25px;
            border: 2px solid #ddd;
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.2s;
            font-size: 1.1em;
        }

        .water-option:hover {
            border-color: #4facfe;
        }

        .water-option.selected {
            border-color: #4facfe;
            background: #4facfe;
            color: white;
            font-weight: 700;
            transform: scale(1.1);
            box-shadow: 0 4px 12px rgba(79, 172, 254, 0.4);
        }

        .submit-button {
            width: 100%;
            padding: 20px;
            font-size: 1.5em;
            font-weight: 700;
            border: none;
            border-radius: 15px;
            cursor: pointer;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            transition: transform 0.2s, box-shadow 0.2s;
            margin-top: 20px;
        }

        .submit-button:hover:not(:disabled) {
            transform: translateY(-3px);
            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.3);
        }

        .submit-button:disabled {
            background: #ccc;
            cursor: not-allowed;
        }

        .confirmation {
            display: none;
            background: linear-gradient(135deg, #84fab0 0%, #8fd3f4 100%);
            padding: 30px;
            border-radius: 15px;
            text-align: center;
            margin: 20px 0;
            animation: fadeIn 0.5s;
        }

        .confirmation.show {
            display: block;
        }

        .confirmation h2 {
            color: white;
            font-size: 2em;
            margin-bottom: 10px;
        }

        .confirmation p {
            color: white;
            font-size: 1.3em;
        }

        .history {
            margin-top: 40px;
            padding-top: 40px;
            border-top: 3px solid #eee;
        }

        .history h2 {
            color: #667eea;
            font-size: 2em;
            margin-bottom: 20px;
            text-align: center;
        }

        .history-list {
            display: flex;
            flex-direction: column;
            gap: 15px;
        }

        .history-card {
            background: white;
            padding: 20px;
            border-radius: 15px;
            border-left: 5px solid;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
        }

        .history-card.intensity-low {
            border-left-color: #84fab0;
            background: #f0fff4;
        }

        .history-card.intensity-medium {
            border-left-color: #ffd93d;
            background: #fffef0;
        }

        .history-card.intensity-high {
            border-left-color: #ff6b6b;
            background: #fff5f5;
        }

        .history-card.no-headache {
            border-left-color: #4facfe;
            background: #f0f9ff;
        }

        .history-date {
            font-weight: 700;
            color: #333;
            font-size: 1.2em;
            margin-bottom: 10px;
        }

        .history-details {
            color: #666;
            font-size: 1em;
            line-height: 1.6;
        }

        .history-section {
            margin-top: 10px;
            padding-top: 10px;
            border-top: 1px solid #eee;
        }

        .history-label {
            font-weight: 600;
            color: #667eea;
            margin-right: 5px;
        }

        .no-entries {
            text-align: center;
            color: #999;
            font-size: 1.2em;
            padding: 20px;
        }

        .reset-button {
            margin-top: 20px;
            padding: 12px 25px;
            background: #f5576c;
            color: white;
            border: none;
            border-radius: 10px;
            cursor: pointer;
            font-size: 1.1em;
            font-weight: 600;
        }

        .reset-button:hover {
            background: #d43f52;
        }

        .hidden {
            display: none;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(-10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .show {
            animation: fadeIn 0.5s;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>🧠 Daily Headache Tracker</h1>
            <span class="version-badge">Version 2</span>
        </div>

        <div class="date-display" id="dateDisplay"></div>

        <!-- Main Headache Question -->
        <div class="section">
            <div class="question">
                <div class="question-text">Did you have a headache today?</div>
                <div class="button-group">
                    <button class="big-button yes-button" onclick="handleHeadacheResponse(true)">YES</button>
                    <button class="big-button no-button" onclick="handleHeadacheResponse(false)">NO</button>
                </div>
            </div>
        </div>

        <!-- Headache Details (shown only if YES) -->
        <div id="headacheDetails" class="hidden">
            <div class="section">
                <div class="section-title">📍 Tell us about your headache</div>
                
                <div class="question">
                    <div class="question-text">When did it start?</div>
                    <select id="startTime">
                        <option value="">Choose a time...</option>
                        <option value="Morning">Morning</option>
                        <option value="Afternoon">Afternoon</option>
                        <option value="Evening">Evening</option>
                        <option value="Night">Night</option>
                    </select>
                </div>

                <div class="question">
                    <div class="question-text">How bad was it?</div>
                    <div class="emoji-scale" id="intensityScale">
                        <div class="emoji-option" data-value="1-3" onclick="selectIntensity(this)">
                            <span class="emoji">😊</span>
                            <span class="label">1-3</span>
                        </div>
                        <div class="emoji-option" data-value="4-6" onclick="selectIntensity(this)">
                            <span class="emoji">😐</span>
                            <span class="label">4-6</span>
                        </div>
                        <div class="emoji-option" data-value="7-9" onclick="selectIntensity(this)">
                            <span class="emoji">😢</span>
                            <span class="label">7-9</span>
                        </div>
                        <div class="emoji-option" data-value="10" onclick="selectIntensity(this)">
                            <span class="emoji">😫</span>
                            <span class="label">10</span>
                        </div>
                    </div>
                </div>

                <div class="question">
                    <div class="question-text">Where did your head hurt?</div>
                    <div class="button-group">
                        <button class="option-button" onclick="toggleSelection(this, 'location')">Front</button>
                        <button class="option-button" onclick="toggleSelection(this, 'location')">Back</button>
                        <button class="option-button" onclick="toggleSelection(this, 'location')">Sides</button>
                        <button class="option-button" onclick="toggleSelection(this, 'location')">Temples</button>
                        <button class="option-button" onclick="toggleSelection(this, 'location')">All Over</button>
                    </div>
                </div>

                <div class="question">
                    <div class="question-text">How long did it last?</div>
                    <select id="duration">
                        <option value="">Choose duration...</option>
                        <option value="Less than 1 hour">Less than 1 hour</option>
                        <option value="1-2 hours">1-2 hours</option>
                        <option value="2-4 hours">2-4 hours</option>
                        <option value="More than 4 hours">More than 4 hours</option>
                        <option value="Still hurts">Still hurts</option>
                    </select>
                </div>

                <div class="question">
                    <div class="question-text">Did you have any of these?</div>
                    <div class="checkbox-group" id="symptoms">
                        <div class="checkbox-item">
                            <input type="checkbox" id="symptom1" value="Felt sick to stomach">
                            <label for="symptom1">Felt sick to stomach</label>
                        </div>
                        <div class="checkbox-item">
                            <input type="checkbox" id="symptom2" value="Bright lights hurt my eyes">
                            <label for="symptom2">Bright lights hurt my eyes</label>
                        </div>
                        <div class="checkbox-item">
                            <input type="checkbox" id="symptom3" value="Sounds were too loud">
                            <label for="symptom3">Sounds were too loud</label>
                        </div>
                        <div class="checkbox-item">
                            <input type="checkbox" id="symptom4" value="Felt dizzy">
                            <label for="symptom4">Felt dizzy</label>
                        </div>
                        <div class="checkbox-item">
                            <input type="checkbox" id="symptom5" value="Vision was blurry or weird">
                            <label for="symptom5">Vision was blurry or weird</label>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Daily Factors (always shown) -->
        <div class="section">
            <div class="section-title">📝 Daily Check-in</div>

            <div class="question">
                <div class="question-text">What was the weather today?</div>
                <div class="button-group">
                    <button class="option-button" onclick="toggleSelection(this, 'weather')">☀️ Sunny</button>
                    <button class="option-button" onclick="toggleSelection(this, 'weather')">🌧️ Rainy</button>
                    <button class="option-button" onclick="toggleSelection(this, 'weather')">☁️ Cloudy</button>
                    <button class="option-button" onclick="toggleSelection(this, 'weather')">🔥 Hot</button>
                    <button class="option-button" onclick="toggleSelection(this, 'weather')">❄️ Cold</button>
                </div>
            </div>

            <div class="question">
                <div class="question-text">How did you feel today? (You can pick more than one!)</div>
                <div class="button-group">
                    <button class="option-button" onclick="toggleSelection(this, 'mood')">😊 Happy</button>
                    <button class="option-button" onclick="toggleSelection(this, 'mood')">😰 Worried/Stressed</button>
                    <button class="option-button" onclick="toggleSelection(this, 'mood')">😴 Tired</button>
                    <button class="option-button" onclick="toggleSelection(this, 'mood')">😠 Angry</button>
                    <button class="option-button" onclick="toggleSelection(this, 'mood')">😢 Sad</button>
                    <button class="option-button" onclick="toggleSelection(this, 'mood')">😐 Normal</button>
                </div>
            </div>

            <div class="question">
                <div class="question-text">Did you exercise or play hard today?</div>
                <div class="button-group">
                    <button class="big-button yes-button" onclick="handleExerciseResponse(this, 'YES')">YES</button>
                    <button class="big-button no-button" onclick="handleExerciseResponse(this, 'NO')">NO</button>
                </div>
            </div>

            <div class="question">
                <div class="question-text">Did you drink enough water?</div>
                <div class="water-cups">
                    <div class="water-option" onclick="toggleSelection(this, 'water')">💧 Yes</div>
                    <div class="water-option" onclick="toggleSelection(this, 'water')">🤔 Not sure</div>
                    <div class="water-option" onclick="toggleSelection(this, 'water')">❌ No</div>
                </div>
            </div>

            <div class="question">
                <div class="question-text">Did you eat your meals today?</div>
                <div class="checkbox-group">
                    <div class="checkbox-item">
                        <input type="checkbox" id="meal1" value="Breakfast">
                        <label for="meal1">🍳 Breakfast</label>
                    </div>
                    <div class="checkbox-item">
                        <input type="checkbox" id="meal2" value="Lunch">
                        <label for="meal2">🥪 Lunch</label>
                    </div>
                    <div class="checkbox-item">
                        <input type="checkbox" id="meal3" value="Dinner">
                        <label for="meal3">🍽️ Dinner</label>
                    </div>
                    <div class="checkbox-item">
                        <input type="checkbox" id="meal4" value="Snacks">
                        <label for="meal4">🍎 Snacks</label>
                    </div>
                </div>
            </div>

            <div class="question">
                <div class="question-text">How much screen time did you have?</div>
                <div class="button-group">
                    <button class="option-button" onclick="toggleSelection(this, 'screen')">📱 A little</button>
                    <button class="option-button" onclick="toggleSelection(this, 'screen')">📱📱 Some</button>
                    <button class="option-button" onclick="toggleSelection(this, 'screen')">📱📱📱 A lot</button>
                </div>
            </div>

            <div class="question">
                <div class="question-text">How did you sleep last night?</div>
                <div class="button-group">
                    <button class="option-button" onclick="toggleSelection(this, 'sleep')">⭐ Great</button>
                    <button class="option-button" onclick="toggleSelection(this, 'sleep')">👍 OK</button>
                    <button class="option-button" onclick="toggleSelection(this, 'sleep')">😴 Not good</button>
                </div>
            </div>
        </div>

        <button class="submit-button" id="submitButton" onclick="submitEntry()" disabled>Submit Entry</button>

        <div class="confirmation" id="confirmation">
            <h2>🎉 Awesome job!</h2>
            <p id="confirmationText"></p>
        </div>

        <div class="history">
            <h2>📅 Past Entries</h2>
            <div class="history-list" id="historyList">
                <div class="no-entries">No entries yet. Start tracking today!</div>
            </div>
            <button class="reset-button" onclick="resetForm()">Add Another Entry</button>
        </div>
    </div>

    <script>
        let currentEntry = {
            hasHeadache: null,
            startTime: null,
            intensity: null,
            location: [],
            duration: null,
            symptoms: [],
            weather: null,
            mood: [],
            exercise: null,
            water: null,
            meals: [],
            screen: null,
            sleep: null
        };

        function displayCurrentDate() {
            const today = new Date();
            const options = { weekday: 'long', year: 'numeric', month: 'long', day: 'numeric' };
            document.getElementById('dateDisplay').textContent = today.toLocaleDateString('en-US', options);
        }

        function handleHeadacheResponse(hasHeadache) {
            currentEntry.hasHeadache = hasHeadache;
            const headacheDetails = document.getElementById('headacheDetails');

            // Update button styles
            const yesButton = document.querySelectorAll('.yes-button')[0];
            const noButton = document.querySelectorAll('.no-button')[0];
            yesButton.classList.remove('selected');
            noButton.classList.remove('selected');
            
            if (hasHeadache) {
                yesButton.classList.add('selected');
                headacheDetails.classList.remove('hidden');
                headacheDetails.classList.add('show');
            } else {
                noButton.classList.add('selected');
                headacheDetails.classList.add('hidden');
                // Reset headache-specific fields
                currentEntry.startTime = null;
                currentEntry.intensity = null;
                currentEntry.location = [];
                currentEntry.duration = null;
                currentEntry.symptoms = [];
                
                // Scroll to daily check-in section
                setTimeout(() => {
                    document.querySelector('.section:nth-of-type(3)').scrollIntoView({ 
                        behavior: 'smooth', 
                        block: 'start' 
                    });
                }, 100);
            }
            
            checkFormComplete();
        }

        function handleExerciseResponse(element, value) {
            // Remove selected from both exercise buttons
            const exerciseButtons = element.parentElement.querySelectorAll('.big-button');
            exerciseButtons.forEach(btn => btn.classList.remove('selected'));
            
            // Add selected to clicked button
            element.classList.add('selected');
            currentEntry.exercise = value;
            checkFormComplete();
        }

        function toggleSelection(element, category) {
            if (category === 'location' || category === 'mood') {
                // Multi-select categories
                element.classList.toggle('selected');
                const value = element.textContent.trim();
                const index = currentEntry[category].indexOf(value);
                if (index > -1) {
                    currentEntry[category].splice(index, 1);
                } else {
                    currentEntry[category].push(value);
                }
            } else {
                // Single selection for other categories
                const siblings = element.parentElement.querySelectorAll('.option-button, .big-button, .water-option');
                siblings.forEach(sib => sib.classList.remove('selected'));
                element.classList.add('selected');
                currentEntry[category] = element.textContent.trim();
            }
            checkFormComplete();
        }

        function selectIntensity(element) {
            document.querySelectorAll('.emoji-option').forEach(opt => {
                opt.classList.remove('selected');
            });
            element.classList.add('selected');
            currentEntry.intensity = element.getAttribute('data-value');
            checkFormComplete();
        }

        function checkFormComplete() {
            const submitButton = document.getElementById('submitButton');
            
            // Check required fields
            let isComplete = currentEntry.hasHeadache !== null &&
                           currentEntry.weather !== null &&
                           currentEntry.mood.length > 0 &&
                           currentEntry.exercise !== null &&
                           currentEntry.water !== null &&
                           currentEntry.screen !== null &&
                           currentEntry.sleep !== null;

            // If headache, check additional required fields
            if (currentEntry.hasHeadache) {
                const startTime = document.getElementById('startTime').value;
                const duration = document.getElementById('duration').value;
                isComplete = isComplete && 
                           startTime !== '' &&
                           currentEntry.intensity !== null &&
                           currentEntry.location.length > 0 &&
                           duration !== '';
                currentEntry.startTime = startTime;
                currentEntry.duration = duration;
            }

            submitButton.disabled = !isComplete;
        }

        // Event listeners for dropdowns
        document.getElementById('startTime').addEventListener('change', checkFormComplete);
        document.getElementById('duration').addEventListener('change', checkFormComplete);

        // Event listeners for checkboxes
        document.querySelectorAll('#symptoms input[type="checkbox"]').forEach(checkbox => {
            checkbox.addEventListener('change', function() {
                currentEntry.symptoms = Array.from(document.querySelectorAll('#symptoms input:checked'))
                    .map(cb => cb.value);
            });
        });

        document.querySelectorAll('input[type="checkbox"][id^="meal"]').forEach(checkbox => {
            checkbox.addEventListener('change', function() {
                currentEntry.meals = Array.from(document.querySelectorAll('input[type="checkbox"][id^="meal"]:checked'))
                    .map(cb => cb.value);
                checkFormComplete();
            });
        });

        function submitEntry() {
            const entry = {
                date: new Date().toISOString().split('T')[0],
                ...currentEntry
            };

            // Get existing entries
            let entries = JSON.parse(localStorage.getItem('headacheEntriesV2') || '[]');
            
            // Check if entry for today already exists
            const existingIndex = entries.findIndex(e => e.date === entry.date);
            if (existingIndex !== -1) {
                entries[existingIndex] = entry;
            } else {
                entries.push(entry);
            }
            
            localStorage.setItem('headacheEntriesV2', JSON.stringify(entries));

            // Show confirmation
            const confirmation = document.getElementById('confirmation');
            const confirmationText = document.getElementById('confirmationText');
            const today = new Date();
            confirmationText.textContent = `Entry saved for ${today.toLocaleDateString('en-US', { month: 'long', day: 'numeric', year: 'numeric' })}! Great work tracking your health!`;
            confirmation.classList.add('show');

            // Disable form
            document.querySelectorAll('button').forEach(btn => {
                if (!btn.classList.contains('reset-button')) btn.disabled = true;
            });

            // Refresh history
            displayHistory();
        }

        function displayHistory() {
            const entries = JSON.parse(localStorage.getItem('headacheEntriesV2') || '[]');
            const historyList = document.getElementById('historyList');

            if (entries.length === 0) {
                historyList.innerHTML = '<div class="no-entries">No entries yet. Start tracking today!</div>';
                return;
            }

            // Sort by date (newest first)
            entries.sort((a, b) => new Date(b.date) - new Date(a.date));

            historyList.innerHTML = entries.map(entry => {
                const date = new Date(entry.date);
                const formattedDate = date.toLocaleDateString('en-US', { 
                    weekday: 'long', 
                    year: 'numeric', 
                    month: 'long', 
                    day: 'numeric' 
                });

                let intensityClass = 'no-headache';
                if (entry.hasHeadache) {
                    const intensityValue = entry.intensity;
                    if (intensityValue === '1-3') intensityClass = 'intensity-low';
                    else if (intensityValue === '4-6') intensityClass = 'intensity-medium';
                    else intensityClass = 'intensity-high';
                }

                let html = `<div class="history-card ${intensityClass}">
                    <div class="history-date">${formattedDate}</div>
                    <div class="history-details">`;

                if (entry.hasHeadache) {
                    html += `
                        <div><strong>⚠️ Headache</strong></div>
                        <div><span class="history-label">Started:</span>${entry.startTime}</div>
                        <div><span class="history-label">Intensity:</span>${entry.intensity}/10</div>
                        <div><span class="history-label">Location:</span>${entry.location.join(', ')}</div>
                        <div><span class="history-label">Duration:</span>${entry.duration}</div>`;
                    
                    if (entry.symptoms.length > 0) {
                        html += `<div><span class="history-label">Symptoms:</span>${entry.symptoms.join(', ')}</div>`;
                    }
                } else {
                    html += `<div><strong>✅ No headache today!</strong></div>`;
                }

                html += `
                    <div class="history-section">
                        <div><span class="history-label">Weather:</span>${entry.weather}</div>
                        <div><span class="history-label">Mood:</span>${Array.isArray(entry.mood) ? entry.mood.join(', ') : entry.mood}</div>
                        <div><span class="history-label">Exercise:</span>${entry.exercise}</div>
                        <div><span class="history-label">Water:</span>${entry.water}</div>
                        <div><span class="history-label">Meals:</span>${entry.meals && entry.meals.length > 0 ? entry.meals.join(', ') : 'None'}</div>
                        <div><span class="history-label">Screen time:</span>${entry.screen}</div>
                        <div><span class="history-label">Sleep:</span>${entry.sleep}</div>
                    </div>
                </div></div>`;

                return html;
            }).join('');
        }

        function resetForm() {
            currentEntry = {
                hasHeadache: null,
                startTime: null,
                intensity: null,
                location: [],
                duration: null,
                symptoms: [],
                weather: null,
                mood: [],
                exercise: null,
                water: null,
                meals: [],
                screen: null,
                sleep: null
            };

            document.getElementById('headacheDetails').classList.add('hidden');
            document.getElementById('confirmation').classList.remove('show');
            document.getElementById('startTime').value = '';
            document.getElementById('duration').value = '';
            
            document.querySelectorAll('.emoji-option, .option-button, .big-button, .water-option').forEach(el => {
                el.classList.remove('selected');
            });
            
            document.querySelectorAll('input[type="checkbox"]').forEach(cb => cb.checked = false);
            document.querySelectorAll('button').forEach(btn => btn.disabled = false);
            document.getElementById('submitButton').disabled = true;

            displayCurrentDate();
        }

        // Initialize
        displayCurrentDate();
        displayHistory();
    </script>
</body>
</html>